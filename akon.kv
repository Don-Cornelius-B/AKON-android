#:import config config
#:import Window kivy.core.window.Window

<LoginCard@BoxLayout>:
    orientation: 'vertical'
    padding: 30
    spacing: 20
    size_hint: 0.85, None
    height: 320
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.05
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [20,]
        Color:
            rgba: config.CYBER_BLUE
        Line:
            width: 1.2
            rounded_rectangle: (self.x, self.y, self.width, self.height, 20)

<MessageBubble>:
    orientation: 'vertical'
    size_hint: 0.75, None
    height: self.minimum_height
    padding: [10, 10]
    spacing: 5
    canvas.before:
        Color:
            rgba: config.MY_BUBBLE if root.is_me else config.THEIR_BUBBLE
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [15, 15, 0 if root.is_me else 15, 15 if root.is_me else 0]

    Label:
        text: "[b]{}[/b] [size=12]{}[/size]".format(root.sender, root.time)
        markup: True
        size_hint_y: None
        height: 20
        halign: 'left'
        text_size: self.width, None
        color: config.TEXT_LIGHT

    Label:
        text: root.message
        size_hint_y: None
        height: self.texture_size[1]
        text_size: self.width, None
        halign: 'left'
        valign: 'top'
        color: config.TEXT_LIGHT

# --- Main Screen Manager ---
AnchorLayout:
    id: root_window
    canvas.before:
        Color:
            rgba: config.DARK_SPACE
        Rectangle:
            pos: self.pos
            size: self.size

    # The screen content is handled dynamically by main.py